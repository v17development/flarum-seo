/*! For license information please see forum.js.LICENSE.txt */
(()=>{var t={977:t=>{"use strict";t.exports=flarum.extensions["fof-upload"]},24:(t,e,o)=>{var a=o(735).default;function n(){"use strict";t.exports=n=function(){return o},t.exports.__esModule=!0,t.exports.default=t.exports;var e,o={},i=Object.prototype,r=i.hasOwnProperty,s=Object.defineProperty||function(t,e,o){t[e]=o.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",m=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function h(t,e,o){return Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(e){h=function(t,e,o){return t[e]=o}}function p(t,e,o,a){var n=e&&e.prototype instanceof w?e:w,i=Object.create(n.prototype),r=new U(a||[]);return s(i,"_invoke",{value:M(t,o,r)}),i}function d(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(t){return{type:"throw",arg:t}}}o.wrap=p;var f="suspendedStart",g="suspendedYield",v="executing",b="completed",y={};function w(){}function I(){}function N(){}var S={};h(S,c,(function(){return this}));var x=Object.getPrototypeOf,T=x&&x(x(L([])));T&&T!==i&&r.call(T,c)&&(S=T);var C=N.prototype=w.prototype=Object.create(S);function D(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function G(t,e){function o(n,i,s,l){var c=d(t[n],t,i);if("throw"!==c.type){var m=c.arg,u=m.value;return u&&"object"==a(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){o("next",t,s,l)}),(function(t){o("throw",t,s,l)})):e.resolve(u).then((function(t){m.value=t,s(m)}),(function(t){return o("throw",t,s,l)}))}l(c.arg)}var n;s(this,"_invoke",{value:function(t,a){function i(){return new e((function(e,n){o(t,a,e,n)}))}return n=n?n.then(i,i):i()}})}function M(t,o,a){var n=f;return function(i,r){if(n===v)throw Error("Generator is already running");if(n===b){if("throw"===i)throw r;return{value:e,done:!0}}for(a.method=i,a.arg=r;;){var s=a.delegate;if(s){var l=O(s,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===f)throw n=b,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=v;var c=d(t,o,a);if("normal"===c.type){if(n=a.done?b:g,c.arg===y)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(n=b,a.method="throw",a.arg=c.arg)}}}function O(t,o){var a=o.method,n=t.iterator[a];if(n===e)return o.delegate=null,"throw"===a&&t.iterator.return&&(o.method="return",o.arg=e,O(t,o),"throw"===o.method)||"return"!==a&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+a+"' method")),y;var i=d(n,t.iterator,o.arg);if("throw"===i.type)return o.method="throw",o.arg=i.arg,o.delegate=null,y;var r=i.arg;return r?r.done?(o[t.resultName]=r.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=e),o.delegate=null,y):r:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,y)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function U(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t||""===t){var o=t[c];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function o(){for(;++n<t.length;)if(r.call(t,n))return o.value=t[n],o.done=!1,o;return o.value=e,o.done=!0,o};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return I.prototype=N,s(C,"constructor",{value:N,configurable:!0}),s(N,"constructor",{value:I,configurable:!0}),I.displayName=h(N,u,"GeneratorFunction"),o.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===I||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,N):(t.__proto__=N,h(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},o.awrap=function(t){return{__await:t}},D(G.prototype),h(G.prototype,m,(function(){return this})),o.AsyncIterator=G,o.async=function(t,e,a,n,i){void 0===i&&(i=Promise);var r=new G(p(t,e,a,n),i);return o.isGeneratorFunction(e)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},D(C),h(C,u,"Generator"),h(C,c,(function(){return this})),h(C,"toString",(function(){return"[object Generator]"})),o.keys=function(t){var e=Object(t),o=[];for(var a in e)o.push(a);return o.reverse(),function t(){for(;o.length;){var a=o.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},o.values=L,U.prototype={constructor:U,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var o in this)"t"===o.charAt(0)&&r.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function a(a,n){return s.type="throw",s.arg=t,o.next=a,n&&(o.method="next",o.arg=e),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var i=n?n.completion:{};return i.type=t,i.arg=e,n?(this.method="next",this.next=n.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),k(o),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc===t){var a=o.completion;if("throw"===a.type){var n=a.arg;k(o)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,o,a){return this.delegate={iterator:L(t),resultName:o,nextLoc:a},"next"===this.method&&(this.arg=e),y}},o}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},735:t=>{function e(o){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(o)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},183:(t,e,o)=>{var a=o(24)();t.exports=a;try{regeneratorRuntime=a}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}}},e={};function o(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var a in e)o.o(e,a)&&!o.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};(()=>{"use strict";o.r(a),o.d(a,{components:()=>B});const t=flarum.core.compat["forum/app"];var e=o.n(t);const n=flarum.core.compat["forum/utils/DiscussionControls"];var i=o.n(n);const r=flarum.core.compat["forum/components/Button"];var s=o.n(r);const l=flarum.core.compat["common/extend"];function c(t,e,o,a,n,i,r){try{var s=t[i](r),l=s.value}catch(t){return void o(t)}s.done?e(l):Promise.resolve(l).then(a,n)}function u(t){return function(){var e=this,o=arguments;return new Promise((function(a,n){var i=t.apply(e,o);function r(t){c(i,a,n,r,s,"next",t)}function s(t){c(i,a,n,r,s,"throw",t)}r(void 0)}))}}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function p(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,h(t,e)}var d=o(183),f=o.n(d);const g=flarum.core.compat["components/Modal"];var v=o.n(g);const b=flarum.core.compat["components/Button"];var y=o.n(b);const w=flarum.core.compat["components/Switch"];var I=o.n(w);const N=flarum.core.compat["utils/Stream"];var S=o.n(N);const x=flarum.core.compat["common/components/Alert"];var T=o.n(x);const C=flarum.core.compat["common/components/LoadingIndicator"];var D=o.n(C);function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,a=Array(e);o<e;o++)a[o]=t[o];return a}function M(t){if(""==t)return!0;for(var e,o=!0,a=function(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return G(t,e);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?G(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t.split(","));!(e=a()).done;)if(e.value.split(" ").length>4){o=!1;break}return o}function O(t){var e,o,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(o=O(t[e]))&&(a&&(a+=" "),a+=o)}else for(o in t)t[o]&&(a&&(a+=" "),a+=o);return a}flarum.core.compat["components/FieldSet"];const j=function(){for(var t,e,o=0,a="",n=arguments.length;o<n;o++)(t=arguments[o])&&(e=O(t))&&(a&&(a+=" "),a+=e);return a};var k=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).initialized=!0,e.initialLoading=!1,e}p(e,t);var a=e.prototype;return a.oninit=function(e){var o=this;if(t.prototype.oninit.call(this,e),this.attrs.object){if(!this.attrs.object.seoMeta)return this.initialized=!1,app.alerts.show(T(),{type:"error",title:"This object is not a supported SeoMeta object",controls:[m("a",{class:"Button Button--link",href:"https://community.v17.dev/knowledgebase/46",target:"_blank"},"Documentation")]},"Please open this dialog using the objectType and objectId properties or register the object relationship instead."),void setTimeout((function(){o.hide()}),100);this.meta=this.attrs.object.seoMeta()}else this.initializeLoad();this.hasChanges=!1,this.closeText="Close",this.closeInfoText=null,this.loading=!1,this.enableCustomTwitter=!1,this.enableCustomOpenGraph=!1,this.wasManaged=!0,this.seoTagsOpened=!1,this.initializeData()},a.initializeData=function(){this.meta&&(this.autoUpdateData=S()(this.meta.autoUpdateData()),this.wasManaged=!0===this.meta.autoUpdateData(),this.metaTitle=S()(this.meta.title()),this.description=S()(this.meta.description()),this.keywords=S()(this.meta.keywords()),this.robotsNoindex=S()(this.meta.robotsNoindex()),this.robotsNofollow=S()(this.meta.robotsNofollow()),this.robotsNoarchive=S()(this.meta.robotsNoarchive()),this.robotsNoimageindex=S()(this.meta.robotsNoimageindex()),this.robotsNosnippet=S()(this.meta.robotsNosnippet()),this.twitterTitle=S()(this.meta.twitterTitle()),this.twitterDescription=S()(this.meta.twitterDescription()),this.twitterImage=S()(this.meta.twitterImage()),this.twitterImageSource=S()(this.meta.twitterImageSource()),this.openGraphTitle=S()(this.meta.openGraphTitle()),this.openGraphDescription=S()(this.meta.openGraphDescription()),this.openGraphImage=S()(this.meta.openGraphImage()),this.openGraphImageSource=S()(this.meta.openGraphImageSource()),this.estimatedReadingTime=S()(this.meta.estimatedReadingTime()),this.createdAt=S()(this.meta.createdAt()),this.updatedAt=S()(this.meta.updatedAt()),this.enableCustomTwitter=null!==this.twitterTitle()||null!==this.twitterDescription()||"auto"!==this.twitterImageSource(),this.enableCustomOpenGraph=null!==this.openGraphTitle()||null!==this.openGraphDescription())},a.title=function(){return"SEO settings - Meta"},a.className=function(){return"Modal Modal-SEO-settings"},a.initializeLoad=function(){var t=this;this.initialLoading=!0,app.store.find("seo_meta",this.attrs.objectType+"-"+this.attrs.objectId).then((function(e){t.isLoading=!1,t.meta=e,t.initialLoading=!1,t.initializeData()})).then((function(){m.redraw()}))},a.content=function(){var t,e,o=this;return!this.initialized||this.initialLoading?m("div",null,D().component({})):m("div",null,m("div",{className:"Modal-body",onkeyup:function(){return o.updateHasChanges()}},m("div",{className:"Form"},m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Auto update meta tags"),m("div",{className:"helpText"},"When enabled, this items meta tags are automatically updated when the object changes.")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},I().component({state:this.autoUpdateData(),onchange:function(t){o.autoUpdateData(t),o.updateHasChanges()}},"Update object SEO on change")))),m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Meta title"),m("div",{className:"helpText"},"Title in search engines.")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},m("input",{className:"FormControl",bidi:this.metaTitle,placeholder:"Enter page title",disabled:this.autoUpdateData()}),this.autoUpdateData()&&m("div",{className:"ManagedText"},m("i",{className:"fas fa-check"})," Managed")))),m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"}," Meta description"),m("div",{className:"helpText"},"Describes the item and shown in search engines.")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},m("textarea",{className:"FormControl",bidi:this.description,placeholder:"Add a few keywords",disabled:this.autoUpdateData()}),this.autoUpdateData()&&m("div",{className:"ManagedText"},m("i",{className:"fas fa-check"})," Managed")))),m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Keywords"),m("div",{className:"helpText"},"Enter one or more keywords that describes this item.")),m("div",{className:"SeoItemContent"},m("textarea",{className:"FormControl",bidi:this.keywords,placeholder:"Add a few keywords"}),m("div",{className:j("SeoItemContent-helpertext",0==M(null!=(t=this.keywords())?t:"")&&"invalid")},m("b",null,"Note: Separate keywords with a comma.")," Example:"," ",m("i",null,"flarum, web development, forum, apples, security")))),m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Meta image"),m("div",{className:"helpText"},"Displays an image.")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},m("input",{className:"FormControl",bidi:this.openGraphImage,placeholder:"Enter image URL",disabled:this.autoUpdateData()&&"auto"===this.openGraphImageSource()}),this.autoUpdateData()&&"custom"!==this.openGraphImageSource()&&m("div",{className:"ManagedText"},m("i",{className:"fas fa-check"})," Managed"),!this.autoUpdateData()&&this.returnFoFUploadButton((function(t){o.openGraphImage(t),o.openGraphImageSource("fof-upload")})),"auto"!==this.openGraphImageSource()&&"custom"!==this.openGraphImageSource()&&m("div",{className:"SeoItemContent-helpertext"},"Image source managed by ",this.openGraphImageSource())))),m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Robots"),m("div",{className:"helpText"},"Robot-crawling settings for this item.")),m("div",{className:"SeoItemContent"},m("div",{class:j("SeoTags-dropdown-container",this.seoTagsOpened&&"SeoTags-dropdown-open")},m("div",{className:"SeoTags",onclick:function(){return o.seoTagsOpened=!o.seoTagsOpened}},this.returnTag(!this.robotsNoindex(),"Allow indexing page","Page indexing not allowed"),this.returnTag(!this.robotsNofollow(),"Allow follow links","Link following not allowed"),this.robotsNoarchive()&&this.returnTag(!1,"","Archiving pages not allowed"),this.robotsNoimageindex()&&this.returnTag(!1,"","Image indexing not allowed"),this.robotsNosnippet()&&this.returnTag(!1,"","Taking text-snippets not allowed")),m("div",{className:"SeoTags-dropdown"},I().component({state:!this.robotsNoindex(),onchange:function(t){o.robotsNoindex(!t),o.updateHasChanges()}},"Allow indexing page"),I().component({state:!this.robotsNofollow(),onchange:function(t){o.robotsNofollow(!t),o.updateHasChanges()}},"Allow following links to different pages"),I().component({state:this.robotsNoarchive(),onchange:function(t){o.robotsNoarchive(t),o.updateHasChanges()}},"Disable archiving page (noarchive)"),I().component({state:this.robotsNoimageindex(),onchange:function(t){o.robotsNoimageindex(t),o.updateHasChanges()}},"Disable indexing images on this page (noimageindex)"),I().component({state:this.robotsNosnippet(),onchange:function(t){o.robotsNosnippet(t),o.updateHasChanges()}},"Disable text-snippes on page (nosnippet)"))))),m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Estimated reading time"),m("div",{className:"helpText"},"Estimated reading time in seconds.")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},m("input",{className:"FormControl",bidi:this.estimatedReadingTime,placeholder:"Reading time in seconds",type:"number",disabled:this.autoUpdateData()}),this.autoUpdateData()&&m("div",{className:"ManagedText"},m("i",{className:"fas fa-check"})," Managed")))),m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Twitter card")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},I().component({state:!this.enableCustomTwitter,onchange:function(t){return o.enableCustomTwitter=!t},disabled:this.autoUpdateData()},"Auto generate Twitter card"),this.autoUpdateData()&&m("div",{className:"ManagedText"},m("i",{className:"fas fa-check"})," Managed")))),this.enableCustomTwitter&&m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Twitter title")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},m("input",{className:"FormControl",bidi:this.twitterTitle,placeholder:this.metaTitle(),disabled:this.autoUpdateData()})))),this.enableCustomTwitter&&m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Twitter description")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},m("textarea",{className:"FormControl",bidi:this.twitterDescription,placeholder:this.description(),disabled:this.autoUpdateData()})))),this.enableCustomTwitter&&m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Twitter image"),m("div",{className:"helpText"},"Displays an image on Twitter.")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},m("input",{className:"FormControl",bidi:this.twitterImage,placeholder:null!=(e=this.openGraphImage())?e:"Enter image URL",disabled:this.autoUpdateData()&&"auto"===this.twitterImage()}),this.returnFoFUploadButton((function(t){o.twitterImage(t),o.twitterImageSource("fof-upload")})),"auto"!==this.twitterImageSource()&&"custom"!==this.twitterImageSource()&&m("div",{className:"SeoItemContent-helpertext"},"Image source managed by ",this.twitterImageSource()," -"," ",m("a",{href:"#",onclick:function(t){t.preventDefault(),o.twitterImage(null),o.twitterImageSource("auto"),o.updateHasChanges()}},"Reset image"))))),m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Open Graph tags")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},I().component({state:!this.enableCustomOpenGraph,onchange:function(t){return o.enableCustomOpenGraph=!t},disabled:this.autoUpdateData()},"Auto generate Open Graph tags"),this.autoUpdateData()&&m("div",{className:"ManagedText"},m("i",{className:"fas fa-check"})," Managed")))),this.enableCustomOpenGraph&&m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Open Graph title")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},m("input",{className:"FormControl",bidi:this.openGraphTitle,placeholder:this.metaTitle(),disabled:this.autoUpdateData()})))),this.enableCustomOpenGraph&&m("div",{className:"SeoItemContainer"},m("div",{className:"SeoItemInfo"},m("div",{class:"SeoItemInfo-title"},"Open Graph description")),m("div",{className:"SeoItemContent"},m("div",{className:"ManagedContainer"},m("textarea",{className:"FormControl",bidi:this.openGraphDescription,placeholder:"Custom Twitter description",disabled:this.autoUpdateData()})))))),m("div",{style:"padding: 25px 30px; text-align: center;"},this.closeInfoText&&m("div",{style:"margin-bottom: 15px; font-size: 12px;"},m("b",null,"Note:")," ",this.closeInfoText),this.closeDialogButton()))},a.returnFoFUploadButton=function(t){var e=this,a=null;if("fof-upload"in flarum.extensions&&app.forum.attribute("fof-upload.canUpload")){var n=o(977).components,i=n.Uploader,r=n.FileManagerModal,s=new i;a=m(y(),{class:"UploadButton Button",onclick:u(f().mark((function o(){return f().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:app.modal.show(r,{uploader:s,onSelect:function(o){var a=app.store.getById("files",o[0]);t(a.url()),e.updateHasChanges()}},!0);case 1:case"end":return o.stop()}}),o)})))},"Upload file")}return a},a.returnTag=function(t,e,o){return m("div",{className:j("SeoTag",!t&&"SeoTagDisabled")},t?e:o)},a.closeDialogButton=function(){return m(y(),{type:"submit",className:"Button Button--primary",loading:this.loading},this.closeText)},a.updateHasChanges=function(){this.closeText=!this.wasManaged&&this.autoUpdateData()?"Save & auto-fill":"Save",!this.wasManaged&&this.autoUpdateData()&&(this.closeInfoText="This change will revert custom changes and fill the meta-tags with item-data."),this.hasChanges=!0},a.submitData=function(){var t,e,o,a,n,i,r,s,l,c={};return c.autoUpdateData=this.autoUpdateData(),c.title=this.metaTitle(),c.description=this.description(),""!==this.keywords()&&(c.keywords=null!=(t=this.keywords())?t:null),c.robotsNoindex=this.robotsNoindex(),c.robotsNofollow=this.robotsNofollow(),c.robotsNoarchive=this.robotsNoarchive(),c.robotsNoimageindex=this.robotsNoimageindex(),c.robotsNosnippet=this.robotsNosnippet(),""!==this.twitterTitle()&&(c.twitterTitle=null!=(e=this.twitterTitle())?e:null),""!==this.twitterDescription()&&(c.twitterDescription=null!=(o=this.twitterDescription())?o:null),""!==this.twitterImage()&&(c.twitterImage=this.twitterImage()),"auto"!==this.twitterImageSource()&&(c.twitterImageSource=null!=(a=this.twitterImageSource())?a:null),""!==this.openGraphTitle()&&(c.openGraphTitle=null!=(n=this.openGraphTitle())?n:null),""!==this.openGraphDescription()&&(c.openGraphDescription=null!=(i=this.openGraphDescription())?i:null),""!==this.openGraphImage()&&(c.openGraphImage=null!=(r=this.openGraphImage())?r:null),"auto"!==this.openGraphImageSource()&&(c.openGraphImageSource=null!=(s=this.openGraphImageSource())?s:null),""!==this.estimatedReadingTime()&&(c.estimatedReadingTime=null!=(l=this.estimatedReadingTime())?l:null),c},a.onsubmit=function(t){var e=this;t.preventDefault(),this.hasChanges?(this.loading=!0,this.meta.save(this.submitData()).then((function(){app.alerts.show({type:"success"},"Saved!"),e.hide()})).catch((function(t){console.log(t)})).then((function(){e.saving=!1,m.redraw()}))):this.hide()},a.onsaved=function(){this.hide()},e}(v());const U=flarum.core.compat["common/Model"];var L=o.n(U);const E=flarum.core.compat["common/utils/mixin"];var _=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.apiEndpoint=function(){return"/seo_meta"+(this.exists?"/"+this.data.id:"")},e}(o.n(E)()(L(),{objectType:L().attribute("objectType"),objectId:L().attribute("objectId"),autoUpdateData:L().attribute("autoUpdateData"),title:L().attribute("title"),description:L().attribute("description"),keywords:L().attribute("keywords"),robotsNoindex:L().attribute("robotsNoindex"),robotsNofollow:L().attribute("robotsNofollow"),robotsNoarchive:L().attribute("robotsNoarchive"),robotsNoimageindex:L().attribute("robotsNoimageindex"),robotsNosnippet:L().attribute("robotsNosnippet"),twitterTitle:L().attribute("twitterTitle"),twitterDescription:L().attribute("twitterDescription"),twitterImage:L().attribute("twitterImage"),twitterImageSource:L().attribute("twitterImageSource"),openGraphTitle:L().attribute("openGraphTitle"),openGraphDescription:L().attribute("openGraphDescription"),openGraphImage:L().attribute("openGraphImage"),openGraphImageSource:L().attribute("openGraphImageSource"),estimatedReadingTime:L().attribute("estimatedReadingTime"),createdAt:L().attribute("createdAt"),updatedAt:L().attribute("updatedAt")}));const A=flarum.core.compat["tags/common/models/Tag"];var F=o.n(A);const P=flarum.core.compat["common/models/Discussion"];var R=o.n(P),B={MetaSeoModal:k};e().initializers.add("v17development-flarum-seo",(function(){(0,l.extend)(i(),"moderationControls",(function(t,o){e().forum.attribute("canConfigureSeo")&&t.add("manageSeo",s().component({icon:"fas fa-search",onclick:function(){return e().modal.show(k,{objectType:"discussions",objectId:o.id()})}},e().translator.trans("v17development-flarum-seo.forum.controls.configure_seo")),-1e3)})),e().store.models.seoMeta=_,R().prototype.seoMeta=L().hasOne("seoMeta"),F().prototype.seoMeta=L().hasOne("seoMeta")}))})(),module.exports=a})();
//# sourceMappingURL=forum.js.map